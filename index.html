<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Interactive Arabic Alphabet with Keyboard & TTS</title>
  <!-- Font: Noto Naskh Arabic -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' x='50' text-anchor='middle' font-size='90' font-family='Noto Naskh Arabic'%3E%D8%B9%3C/text%3E%3C/svg%3E" />
  <!-- Font: Noto Naskh Arabic -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap"
  />
  <style>
    body {
      font-family: 'Noto Naskh Arabic', sans-serif;
      text-align: center;
      background-color: #fff;
      padding: 20px;
      margin: 0;
      direction: rtl;
    }
    .top-section {
      margin-bottom: 30px;
    }
    .keyboard {
      display: inline-flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-bottom: 10px;
    }
    .key-btn {
      font-size: 1.3rem;
      padding: 5px 10px;
      cursor: pointer;
      border: 1px solid #ccc;
      background: #eee;
      user-select: none;
      position: relative; /* allows tooltip positioning */
    }
    .key-btn:hover {
      background: #ddd;
    }
    /* Show tooltip if data-name is present (not for space key) */
    .key-btn[data-name]:hover::after {
      content: attr(data-name);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: #fff;
      font-size: 0.9rem;
      padding: 3px 6px;
      border-radius: 4px;
      white-space: nowrap;
      pointer-events: none;
    }

    .input-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin: 0 auto 20px;
      max-width: 600px; /* optional limit */
    }
    #compose-input {
      font-size: 1.3rem;
      padding: 5px;
      width: 60%;
      text-align: center;
      font-family: 'Noto Naskh Arabic', sans-serif;
    }

    .study-link {
      font-size: 1.4rem;
      text-decoration: none;
      color: #333;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .study-link:hover {
      color: #000;
    }

    /* Chart styling (unchanged) */
    .table {
      display: inline-block;
      margin: 0;
    }
    .row {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }
    .letter {
      font-size: 4rem;
      cursor: pointer;
      position: relative;
      margin: 0;
      font-family: 'Noto Naskh Arabic', sans-serif;
    }
    .letter[data-name]:hover::after {
      content: attr(data-name);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: #fff;
      font-size: 3rem;
      padding: 3px 6px;
      border-radius: 4px;
      white-space: nowrap;
      pointer-events: none;
    }
    .arrow {
      cursor: pointer;
      font-size: 1rem;
      padding: 0 10px;
      user-select: none;
      transition: transform 0.3s;
    }
    .arrow.expanded {
      transform: rotate(180deg);
    }
    .hidden-row {
      display: none;
      font-size: 1.8rem;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
      margin: 0 0 10px 0;
    }
    .accent-letter {
      color: #555;
      cursor: default;
      font-family: 'Noto Naskh Arabic', sans-serif;
    }
  </style>
</head>

<body>

<div class="top-section">
  <!-- Single row: Clear - [Input] - Speak - Study link -->
  <div class="input-container">
    <a href="study.html" class="study-link">📖</a> 
    <button id="speak-btn">🔉</button>
    <input type="text" id="compose-input" placeholder="كتب هنا..." />
    <button id="clear-btn">⌦</button>
  </div>
  <!-- Keyboard row -->
  <div class="keyboard">
    <!-- Basic letters with data-name -->
    <span class="key-btn" data-name="Alif">ا</span>
    <span class="key-btn" data-name="Alif-Hamza">أَ</span>
    <span class="key-btn" data-name="Alif-Hamza">إ</span>
    <span class="key-btn" data-name="Ba">ب</span>
    <span class="key-btn" data-name="Ta">ت</span>
    <span class="key-btn" data-name="Tha">ث</span>
    <span class="key-btn" data-name="Jim">ج</span>
    <span class="key-btn" data-name="Ha">ح</span>
    <span class="key-btn" data-name="Kha">خ</span>
    <span class="key-btn" data-name="Dal">د</span>
    <span class="key-btn" data-name="Dhal">ذ</span>
    <span class="key-btn" data-name="Ra">ر</span>
    <span class="key-btn" data-name="Zay">ز</span>
    <span class="key-btn" data-name="Sin">س</span>
    <span class="key-btn" data-name="Shin">ش</span>
    <span class="key-btn" data-name="Sad">ص</span>
    <span class="key-btn" data-name="Dad">ض</span>
    <span class="key-btn" data-name="Tta">ط</span>
    <span class="key-btn" data-name="Thaa">ظ</span>
    <span class="key-btn" data-name="Ain">ع</span>
    <span class="key-btn" data-name="Ghain">غ</span>
    <span class="key-btn" data-name="Fa">ف</span>
    <span class="key-btn" data-name="Qaf">ق</span>
    <span class="key-btn" data-name="Kaf">ك</span>
    <span class="key-btn" data-name="Lam">ل</span>
    <span class="key-btn" data-name="Mim">م</span>
    <span class="key-btn" data-name="Nun">ن</span>
    <span class="key-btn" data-name="Hha">ه</span>
    <span class="key-btn" data-name="Waw">و</span>
    <span class="key-btn" data-name="Waw-Hamza">ؤ</span>
    <span class="key-btn" data-name="Ya">ي</span>
    <span class="key-btn" data-name="Alif">ى</span>
    <span class="key-btn" data-name="Alif-Hamza">ئ</span>
    <span class="key-btn" data-name="Ta marbuta">ة</span>
    <span class="key-btn" data-name="Hamza">ء</span>

<!-- Accents -->
<span class="key-btn" data-name="Fatha">َ</span>
<span class="key-btn" data-name="Kasra">ِ</span>
<span class="key-btn" data-name="Damma">ُ</span>
<span class="key-btn" data-name="Sukun">ْ</span>

    <!-- Space (no tooltip) -->
    <span class="key-btn" data-char=" " style="min-width:60px;">____</span>
  </div>
</div>

<!-- ALPHABET CHART -->
<div class="table">
  <div class="row">
    <span class="letter" data-audio="audio/alif.mp3" data-name="ألف">ا  اـاـا</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/ba.mp3" data-name="باء">ب ببب</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/ta.mp3" data-name="تاء">ت تتت</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/tha.mp3" data-name="ثاء">ث ثثث</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/jeem.mp3" data-name="جيم">ج ججج</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/ha.mp3" data-name="حاء">ح حجح</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/kha.mp3" data-name="خاء">خ خخخ</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/dal.mp3" data-name="دال">د  د ـد ـد</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/dhal.mp3" data-name="ذال">ذ  ذ ـذ ـذ</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/ra.mp3" data-name="راء">ر  ر ـر ـر</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/zay.mp3" data-name="زاي">ز  ز ـز ـز</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/sin.mp3" data-name="سين">س سسس</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/shin.mp3" data-name="شين">ش ششش</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/sad.mp3" data-name="صاد">ص صصص</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/dad.mp3" data-name="ضاد">ض ضضض</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/tta.mp3" data-name="طاء">ط ططط</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/dha.mp3" data-name="ظاء">ظ ظظظ</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/ain.mp3" data-name="عين">ع ععع</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/ghayn.mp3" data-name="غين">غ غغغ</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/fa.mp3" data-name="فاء">ف ففف</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/qaf.mp3" data-name="قاف">ق ققق</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/kaf.mp3" data-name="كاف">ك ككك</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/lam.mp3" data-name="لام">ل للل</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/mim.mp3" data-name="ميم">م ممم</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/nun.mp3" data-name="نون">ن ننن</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/haa.mp3" data-name="هاء">ه ههه</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/waw.mp3" data-name="واو">و  و ـو ـو</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/ya.mp3" data-name="ياء">ي ييي</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/alif.mp3" data-name="أليف ماكسورا">ى         ـى</span>
  </div>
  <div class="row">
    <span class="letter" data-audio="audio/tamarbuta.mp3" data-name="تَاءْ مَرْبُوطَة">ة       ـة</span>
  </div>
</div>

 <!-- End of .table -->

<!-- Hidden audio element for letter audios -->
<audio id="audio-player"></audio>

<script>
  // 1) On-Screen Keyboard Logic
  const composeInput = document.getElementById('compose-input');
  const keys = document.querySelectorAll('.key-btn');

  keys.forEach(key => {
    key.addEventListener('click', () => {
      // If there's a data-char attribute, use that; otherwise use textContent
      const char = key.getAttribute('data-char') || key.textContent;
      composeInput.value += char;
    });
  });

  // 2) TTS Handling
  const speakBtn = document.getElementById('speak-btn');
  const clearBtn = document.getElementById('clear-btn');

  speakBtn.addEventListener('click', () => {
    const textToSpeak = composeInput.value.trim();
    if (textToSpeak.length > 0) {
      const utterance = new SpeechSynthesisUtterance(textToSpeak);
      // *** Set language to Arabic (Morocco) ***
      utterance.lang = 'ar-MA';
      speechSynthesis.speak(utterance);
    }
  });

  clearBtn.addEventListener('click', () => {
    composeInput.value = '';
  });

  // 3) Audio on letter clicks
  document.querySelectorAll('.letter').forEach(letter => {
    letter.addEventListener('click', () => {
      const audioSrc = letter.getAttribute('data-audio');
      if (audioSrc) {
        const player = document.getElementById('audio-player');
        player.src = audioSrc;
        player.play();
      }
    });
  });
</script>

</body>
</html>
